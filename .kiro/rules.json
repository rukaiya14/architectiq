{
  "pivot_point_thresholds": {
    "excellent": {
      "threshold": 1.5,
      "label": "Mathematically Excellent",
      "action": "support_choice",
      "tone": "encouraging"
    },
    "good": {
      "threshold": 1.0,
      "label": "Sustainable Choice", 
      "action": "support_choice",
      "tone": "supportive"
    },
    "warning": {
      "threshold": 0.5,
      "label": "High Complexity Tax",
      "action": "moderate_challenge",
      "tone": "advisory"
    },
    "critical": {
      "threshold": 0.0,
      "label": "Mathematical Disaster",
      "action": "aggressive_challenge",
      "tone": "authoritative"
    }
  },
  
  "dealbreaker_conditions": {
    "microservices": {
      "team_size_minimum": 6,
      "experience_minimum": "mixed",
      "timeline_minimum_months": 6,
      "conditions": [
        {
          "check": "teamSize < 6",
          "message": "Team too small for microservices operational overhead",
          "severity": "critical",
          "impact": "80% time on infrastructure vs features"
        },
        {
          "check": "experience === 'junior'",
          "message": "Junior team lacks microservices expertise",
          "severity": "high", 
          "impact": "6+ months learning curve while burning runway"
        },
        {
          "check": "timeline < 6",
          "message": "Microservices incompatible with short deadlines",
          "severity": "critical",
          "impact": "Will miss deadline by 4-6 months"
        }
      ]
    },
    "serverless": {
      "vendor_lock_in_acceptance": "required",
      "cold_start_tolerance": "required",
      "conditions": [
        {
          "check": "vendorLockIn === 'unacceptable'",
          "message": "Vendor lock-in concerns",
          "severity": "medium",
          "impact": "Migration costs 3x higher than traditional architectures"
        },
        {
          "check": "coldStartSensitive === true",
          "message": "Cold start latency issues",
          "severity": "high",
          "impact": "User experience degradation during traffic spikes"
        }
      ]
    },
    "hybrid": {
      "architectural_expertise": "high",
      "complexity_management": "advanced",
      "conditions": [
        {
          "check": "teamSize < 4",
          "message": "Requires expertise in multiple patterns",
          "severity": "medium",
          "impact": "Team becomes jack-of-all-trades, master of none"
        },
        {
          "check": "operationalMaturity < 0.7",
          "message": "Architectural complexity increases over time",
          "severity": "high",
          "impact": "Debugging nightmare across different architectural styles"
        }
      ]
    }
  },
  
  "challenge_triggers": {
    "aggressive_challenge": {
      "conditions": [
        "pivotPoint < 0.5",
        "dealbreakers.length > 0",
        "complexityGap > 30"
      ],
      "persona": "architect",
      "tone": "mathematical_precision",
      "actions": [
        "show_mathematical_proof",
        "display_complexity_tax",
        "present_alternative_recommendation"
      ]
    },
    "moderate_challenge": {
      "conditions": [
        "pivotPoint >= 0.5 && pivotPoint < 1.0",
        "complexityTax > 1.3"
      ],
      "persona": "consultant", 
      "tone": "business_focused",
      "actions": [
        "explain_trade_offs",
        "show_risk_assessment",
        "provide_monitoring_guidance"
      ]
    },
    "support_choice": {
      "conditions": [
        "pivotPoint >= 1.0",
        "dealbreakers.length === 0"
      ],
      "persona": "advisor",
      "tone": "supportive",
      "actions": [
        "validate_choice",
        "provide_implementation_guidance",
        "suggest_success_metrics"
      ]
    }
  },
  
  "complexity_tax_rules": {
    "critical": {
      "pivot_threshold": 0.5,
      "cost_multiplier": 2.5,
      "timeline_multiplier": 2.0,
      "description": "Mathematical overload - team capability severely exceeded"
    },
    "warning": {
      "pivot_threshold": 0.8,
      "cost_multiplier": 1.8,
      "timeline_multiplier": 1.5,
      "description": "High complexity tax - manageable but expensive"
    },
    "caution": {
      "pivot_threshold": 1.0,
      "cost_multiplier": 1.3,
      "timeline_multiplier": 1.2,
      "description": "Moderate complexity tax - acceptable overhead"
    }
  },
  
  "emotional_scenarios": {
    "resume_driven_development": {
      "trigger": "complexArchitectureWithLowPivotPoint",
      "title": "Resume-Driven Development Warning",
      "scenarios": {
        "microservices": {
          "warning": "While your team debugs service mesh configurations, competitors using simpler architectures will ship features 4 months faster.",
          "business_impact": {
            "velocity_drop": "70%",
            "debugging_time": "60% of engineering time",
            "competitor_advantage": "3-4 months ahead"
          }
        },
        "serverless": {
          "warning": "Your 'simple' function architecture now has 47 Lambda functions, and your AWS bill just hit $8,000/month for a product that could run on a $200 VPS.",
          "business_impact": {
            "cost_surprise": "10x higher than expected",
            "vendor_lock_in": "95% migration cost",
            "debugging_complexity": "Distributed tracing nightmare"
          }
        }
      }
    },
    "velocity_killer": {
      "trigger": "pivotPoint < 0.5",
      "title": "Velocity Killer Warning",
      "message": "Feature delivery will slow from weekly to monthly releases within 3 months.",
      "timeline_impact": {
        "month_1": "Team realizes they're in over their heads",
        "month_3": "First major outage due to operational inexperience",
        "month_6": "Team burnout, considering simpler alternatives"
      }
    },
    "operational_reality_check": {
      "trigger": "dealbreakers.length > 0",
      "title": "Operational Reality Check",
      "message": "Your junior team lacks the operational maturity for microservices debugging.",
      "capability_gaps": [
        "Distributed system debugging",
        "Service mesh configuration",
        "Multi-service monitoring",
        "Cross-service transaction management"
      ]
    }
  },
  
  "persona_guidelines": {
    "architect": {
      "use_when": "pivotPoint < 0.8 || dealbreakers.length > 0",
      "tone": "mathematical_precision",
      "key_phrases": [
        "The math is clear:",
        "Your Pivot Point of {X} indicates",
        "Mathematical reality check:",
        "This will cost you ${X} in complexity tax"
      ]
    },
    "consultant": {
      "use_when": "pivotPoint >= 0.8 && pivotPoint < 1.2",
      "tone": "business_focused",
      "key_phrases": [
        "From a business perspective",
        "Consider the trade-offs",
        "Risk-adjusted recommendation:",
        "The strategic implication is"
      ]
    },
    "cto": {
      "use_when": "organizational_impact || long_term_planning",
      "tone": "executive_summary",
      "key_phrases": [
        "From an organizational standpoint",
        "This scales to {X} engineers",
        "Long-term architectural strategy",
        "Executive summary:"
      ]
    }
  },
  
  "migration_triggers": {
    "monolith_to_microservices": {
      "team_size": "15+ developers",
      "traffic": "10,000+ requests/second",
      "deployments": "10+ daily deployments",
      "pivot_point": "1.5 consistently"
    },
    "monolith_to_serverless": {
      "workload": "event-driven",
      "traffic_pattern": "bursty",
      "team_size": "3-8 developers",
      "operational_overhead": "minimize"
    },
    "microservices_to_monolith": {
      "team_size": "< 6 developers",
      "operational_burden": "too_high",
      "debugging_complexity": "unmanageable",
      "business_velocity": "declining"
    }
  },
  
  "success_metrics": {
    "system_effectiveness": [
      "Prevents over-engineering through mathematical analysis",
      "Protects business runway with cost-benefit analysis", 
      "Provides actionable guidance with specific triggers",
      "Generates stakeholder-ready reports"
    ],
    "user_experience": [
      "Clear mathematical justification for all recommendations",
      "Personality-appropriate responses based on situation severity",
      "Actionable next steps with specific implementation guidance",
      "Future-proof strategies with evolution triggers"
    ]
  },
  
  "metadata": {
    "version": "2.0.0",
    "last_updated": "2025-01-11",
    "description": "ArchitectIQ Mathematical Referee - Updated for WSF and CNF implementation",
    "author": "Senior Technical Architect AI",
    "purpose": "Contextual architectural recommendations with mathematical justification"
  }
}